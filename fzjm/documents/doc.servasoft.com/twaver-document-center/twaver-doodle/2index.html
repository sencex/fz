<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>TWaver Documents &raquo; 机柜面板编辑器</title>
<link rel="stylesheet" type="text/css" href="../../../wp-content/themes/mono/style.css">
<LINK href="http://doc.servasoft.com/twaver-document-center/twaver-doodle/%e6%9c%ba%e6%9f%9c%e9%9d%a2%e6%9d%bf%e7%bc%96%e8%be%91%e5%99%a8/favicon.ico" type="image/x-icon" rel=icon>
<LINK href="http://doc.servasoft.com/twaver-document-center/twaver-doodle/%e6%9c%ba%e6%9f%9c%e9%9d%a2%e6%9d%bf%e7%bc%96%e8%be%91%e5%99%a8/favicon.ico" type="image/x-icon" rel="shortcut icon">
<script type='text/javascript' src="../../../wp-content/themes/mono/mono.js"></script>
<meta name='robots' content='noindex,follow' />
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/doc.servasoft.com\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.4.2"}};
			!function(a,b,c){function d(a){var c,d=b.createElement("canvas"),e=d.getContext&&d.getContext("2d"),f=String.fromCharCode;return e&&e.fillText?(e.textBaseline="top",e.font="600 32px Arial","flag"===a?(e.fillText(f(55356,56806,55356,56826),0,0),d.toDataURL().length>3e3):"diversity"===a?(e.fillText(f(55356,57221),0,0),c=e.getImageData(16,16,1,1).data.toString(),e.fillText(f(55356,57221,55356,57343),0,0),c!==e.getImageData(16,16,1,1).data.toString()):("simple"===a?e.fillText(f(55357,56835),0,0):e.fillText(f(55356,57135),0,0),0!==e.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g;c.supports={simple:d("simple"),flag:d("flag"),unicode8:d("unicode8"),diversity:d("diversity")},c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.simple&&c.supports.flag&&c.supports.unicode8&&c.supports.diversity||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel='stylesheet' id='crayon-css'  href='../../../wp-content/plugins/crayon-syntax-highlighter/css/min/crayon.min-ver=_2.7.2_beta.css' type='text/css' media='all' />
<link rel='stylesheet' id='crayon-theme-eclipse-css'  href='../../../wp-content/plugins/crayon-syntax-highlighter/themes/eclipse/eclipse-ver=_2.7.2_beta.css' type='text/css' media='all' />
<link rel='stylesheet' id='crayon-font-monaco-css'  href='../../../wp-content/plugins/crayon-syntax-highlighter/fonts/monaco-ver=_2.7.2_beta.css' type='text/css' media='all' />
<link rel='stylesheet' id='toc-screen-css'  href='../../../wp-content/plugins/table-of-contents-plus/screen.min-ver=1509.css' type='text/css' media='all' />
<script type='text/javascript' src='../../../wp-includes/js/jquery/jquery-ver=1.11.3.js'></script>
<script type='text/javascript' src='../../../wp-includes/js/jquery/jquery-migrate.min-ver=1.2.1.js'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var CrayonSyntaxSettings = {"version":"_2.7.2_beta","is_admin":"0","ajaxurl":"http:\/\/doc.servasoft.com\/wp-admin\/admin-ajax.php","prefix":"crayon-","setting":"crayon-setting","selected":"crayon-setting-selected","changed":"crayon-setting-changed","special":"crayon-setting-special","orig_value":"data-orig-value","debug":""};
var CrayonSyntaxStrings = {"copy":"Press %s to Copy, %s to Paste","minimize":"Click To Expand Code"};
/* ]]> */
</script>
<script type='text/javascript' src='../../../wp-content/plugins/crayon-syntax-highlighter/js/min/crayon.min-ver=_2.7.2_beta.js'></script>
<script type='text/javascript' src='../../../wp-content/plugins/simple-scroll-to-top/js/backttoTop-ver=4.4.2.js'></script>
<link rel='https://api.w.org/' href='../../../wp-json/index.html' />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="../../../xmlrpc.php-rsd.xml" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="../../../wp-includes/wlwmanifest.xml" /> 
<meta name="generator" content="WordPress 4.4.2" />
<link rel="canonical" href="index.html" />
<link rel='shortlink' href='index.html' />
<link rel="alternate" type="application/json+oembed" href="../../../wp-json/oembed/1.0/embed-url=http_||doc.servasoft.com|twaver-document-center|twaver-doodle|_e6_9c_ba_e6_9f_9c_e9_9d_a2_e6_9d_bf_e7_bc_96_e8_be_91_e5_99_a8|.json" />
<link rel="alternate" type="text/xml+oembed" href="../../../wp-json/oembed/1.0/embed-url=http_||doc.servasoft.com|twaver-document-center|twaver-doodle|_e6_9c_ba_e6_9f_9c_e9_9d_a2_e6_9d_bf_e7_bc_96_e8_be_91_e5_99_a8|&format=xml.xml" />
<!-- Simple Scroll To Top 1.0 by Vijayakumar S -->
<style type="text/css">.GotoTop{width:100px;border:1px solid #ccc;background:#f7f7f7;text-align:center;position:fixed;bottom:10px;right:10px;cursor:pointer;display:none;color:#333;font-family:verdana;font-size:11px;padding:5px}</style>
</head>


<body>


<div class="top" id="header">
<div class="top_c">
<div class="topmenu">
<a href="http://servasoft.com/demos">Demo</a>&nbsp;&nbsp;|&nbsp;&nbsp;
<a style="border-bottom:solid 3px #e56417;" href="../../../index.html">文档</a>&nbsp;&nbsp;|&nbsp;&nbsp;
<a href="http://servasoft.com/blog">博客</a>&nbsp;&nbsp;|&nbsp;&nbsp;
<a href="http://servasoft.com/tips">支持库</a><img src="../../../wp-content/themes/mono/images/support.png" style="margin-left:0px;margin-bottom:3px;" />&nbsp;&nbsp;|&nbsp;&nbsp;
<a href="http://servasoft.com/forum">论坛</a><img src="../../../wp-content/themes/mono/images/forum_icon.png" style="margin-left:0px;margin-bottom:3px;" />&nbsp;&nbsp;|&nbsp;&nbsp;
<a href="http://servasoft.com/about">关于</a>&nbsp;&nbsp;|&nbsp;&nbsp;
<a target="_blank" href="http://www.servasoftware.com">EN</a>

                </div>
            </div>
        </div>
        
        <div class="menu_new" id="menubar">
        	<div class="menu_c_new">
            	<div class="logo_new">
                	<a href="../../../index.html"> <img src="../../../wp-content/themes/mono/images/logo.png" /></a>
                </div>
                <div class="nav_new">
                    <ul>
					<li class="page_item page-item-8669"><a href="http://servasoft.com/">首页</a></li>
					<li class="page_item page-item-8678"><a href="http://servasoft.com/product">产品</a></li>
					<li class="page_item page-item-8690"><a href="http://servasoft.com/solution">解决方案</a></li>
					<li class="page_item page-item-5180"><a href="http://servasoft.com/downloads">下载</a></li>
					<li class="page_item page-item-8672"><a href="http://servasoft.com/partner">合作</a></li>
                    </ul>
                </div>
                <div class="clear"></div>
            </div>
        </div>

		<div class="shadow" id="shadowbar"></div>

	<div class="content">
	
	        <div id="sidebar" class="side">
		  <form style="padding-left:45px;"  action="http://doc.servasoft.com/" method="get" role="search">
	        <div class="search-wrap">
			  <input style="width:60%;height:20px;border:1px solid #bbbbbb;vertical-align:middle;" placeholder="Search" type="search" name="s" value="" />
              <button type="submit" style="vertical-align:middle;"><img src="../../../wp-content/themes/mono/images/search_icon.png" /></button>
    	    </div>
	      </form>
            <ul>
                <li class="page_item page-item-1453 page_item_has_children current_page_ancestor"><a href="../../../index.html">TWAVER DOCUMENT CENTER</a>
<ul class='children'>
	<li class="page_item page-item-5365 page_item_has_children current_page_ancestor current_page_parent"><a href="../index.html"><img src='../../../wp-content/themes/mono/images/bookmark_book_open.png'>开发指南 &#8211;  TWaver Doodle</a>
	<ul class='children'>
		<li class="page_item page-item-5368"><a href="../产品概述/index.html">产品概述</a></li>
		<li class="page_item page-item-5370"><a href="../场景编辑器/index.html">场景编辑器</a></li>
		<li class="page_item page-item-5372 current_page_item"><a href="index.html">机柜面板编辑器</a></li>
		<li class="page_item page-item-5374"><a href="../设备面板编辑器/index.html">设备面板编辑器</a></li>
		<li class="page_item page-item-5376"><a href="../组件模板编辑器/index.html">组件模板编辑器</a></li>
	</ul>
</li>
</ul>
</li>
            </ul>
        </div>

	
        <div id="print_content" class="c_right">
            <div class="c_right_contain">
				<div id="views_header" class="update_info">137 views. Last update: March 22, 2016</div>
            	<span class="nav_c_right">
                	<ol>

						<li id="root_nav"><a href="../../../index.html" title="TWAVER DOCUMENT CENTER">TWAVER DOCUMENT CENTER</a></li><li><a href="../index.html" title="<img src='/wp-content/themes/mono/images/bookmark_book_open.png'>开发指南 &#8211;  TWaver Doodle"><img src='../../../wp-content/themes/mono/images/bookmark_book_open.png'>开发指南 &#8211;  TWaver Doodle</a></li>
                        <li>机柜面板编辑器</li>
                        <div class="clear"></div>
                    </ol>
                </span>
				
				<div style="padding-left:10px; padding-top:20px;float:right;">
                    <a href="index.html" onclick="printFriendly(); return false;">
                    <img id="print_button_header" style="border:none;-webkit-box-shadow:none; box-shadow:none;" src="../../../wp-content/themes/mono/images/button-print-gry20.png" alt="Print" />
                    </a>
                </div>

            	<div class="o_content">
                	<div id="toc_container" class="toc_wrap_right toc_white no_bullets"><p class="toc_title">IN THIS PAGE</p><ul class="toc_list"><li><a href="index.html#i"><span class="toc_number toc_depth_1">1</span> 功能介绍</a></li><li><a href="index.html#i-2"><span class="toc_number toc_depth_1">2</span> 组成部份</a><ul><li><a href="index.html#i-3"><span class="toc_number toc_depth_2">2.1</span> 工具栏</a></li><li><a href="index.html#i-4"><span class="toc_number toc_depth_2">2.2</span> 设备栏</a></li><li><a href="index.html#i-5"><span class="toc_number toc_depth_2">2.3</span> 工作区</a></li><li><a href="index.html#i-6"><span class="toc_number toc_depth_2">2.4</span> 属性框</a></li></ul></li><li><a href="index.html#i-7"><span class="toc_number toc_depth_1">3</span> 系统集成</a></li></ul></div>
<h1><span id="i">功能介绍</span></h1>
<p>机柜面板编辑器是可视化摆放机柜里面的设备的编辑工具。</p>
<h1><span id="i-2">组成部份</span></h1>
<p>主要分为4个部分，上边为工具栏，左边为设备栏，中间为工作区，工作区右上角为设备属性框。如下图所示<br />
<a href="../../../wp-content/uploads/2016/03/rackEditor1.jpg" rel="attachment wp-att-5451"><img src="../../../wp-content/uploads/2016/03/rackEditor1.jpg" alt="rackEditor1" width="720" height="540" class="alignnone size-full wp-image-5451" /></a></p>
<h2><span id="i-3">工具栏</span></h2>
<ul>
<li>
<strong>OverView：</strong>全局视图。点击按钮，可以最大化显示工作区里的内容。滚动鼠标滚轮缩放或者拖拽视图后，可以点击该按钮快速重置机柜视图。</li>
<li>
<strong>Export：</strong>导出数据。点击按钮，可以导出已经编辑完的结果。</li>
<li>
<strong>Save：</strong>保存数据。点击按钮，可以保存数据到localStorage中，key值等于机柜对象的id加上&#8221;_children&#8221;，例如：&#8221;JsonObject06B260EA52F24CC697B3A1577554EEFA_children&#8221;</li>
</ul>
<h2><span id="i-4">设备栏</span></h2>
<p>显示make中注册的模型，类别为&#8221;设备&#8221;的所有模型。如果在make中注册设备，请参照make使用手册。</p>
<h2><span id="i-5">工作区</span></h2>
<p>默认显示需要编辑设备位置的机柜前视图。在左边的设备栏中，选择设备，按住鼠标左键拖拽到工作区中，会实时显示虚化的设备在将要排放的位置。例如拖拽6U设备，到31U位置，设备右边文字会显示&#8221;31U-36U&#8221;,属性框中会显示当前位置在31U位置。</p>
<ul>
<li>
工作区中机柜已经没有位置可以摆放设备，那么将没有拖拽效果。鼠标处没有圆形绿色背景的&#8221;+&#8221;图标，机柜中也没有虚化的设备。</li>
<li>
拖拽过程中想取消动作，可以拖出工作区。</li>
<li>
删除摆放后的设备，可以选中设备，点击键盘delete键删除。</li>
</ul>
<h2><span id="i-6">属性框</span></h2>
<p>显示当前选中设备可以编辑属性，支持bid（业务ID）、name（别名）、loc(位置)、panel(面板)属性。</p>
<ol>
<li>
<strong>bid（业务ID）：</strong>将bid设定为业务id，建立3D模型和业务之间的关联关系。</li>
<li>
<strong>name（别名）：</strong>设备别名。</li>
<li>
<strong>loc（位置）：</strong>设备位置，可以直接输入数值来修改机柜位置信息。</li>
<li>
<strong>panel（面板）：</strong>设备面板视图。默认为&#8221;twaver.idc.equipment.newPanel&#8221;,如果需要修改设备面板，可以指定新的面板名称。</li>
</ol>
<h1><span id="i-7">系统集成</span></h1>
<ol>
<li>指定make路径</li>
<li>取得显示编辑器的容器jquery对象</li>
<li>实例化doodle.RackEditor对象</li>
<li>全局视图,调用zoomOverview()方法</li>
<li>编辑结果，调用getData()方法</li>
<li>
    初始化加载机柜背板，调用loadParent(modelClass, args)方法<br />
<!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-57285c9372efd659445104" class="crayon-syntax crayon-theme-eclipse crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" max-width: 1000px; margin-top: 12px; margin-bottom: 12px; margin-left: 20px; margin-right: 35px; clear: none; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">JavaScript</span></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:2; -o-tab-size:2; -webkit-tab-size:2; tab-size:2; font-size: 12px !important; line-height: 15px !important;">
          rackEditor.loadParent('twaver.idc.rack42', {objectId: '机柜对象的id'});</textarea></div>
			<div class="crayon-main" style=" max-width: 1000px;">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-57285c9372efd659445104-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:2; -o-tab-size:2; -webkit-tab-size:2; tab-size:2;"><div class="crayon-line" id="crayon-57285c9372efd659445104-1"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">rackEditor</span><span class="crayon-sy">.</span><span class="crayon-e">loadParent</span><span class="crayon-sy">(</span><span class="crayon-s">'twaver.idc.rack42'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-v">objectId</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">'机柜对象的id'</span><span class="crayon-sy">}</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0143 seconds] -->

    </li>
<li>
    初始化加载设备摆放结果，调用批量加载setData(data)方法<br />
<!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-57285c9372f13824403484" class="crayon-syntax crayon-theme-eclipse crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" max-width: 1000px; margin-top: 12px; margin-bottom: 12px; margin-left: 20px; margin-right: 35px; clear: none; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">JavaScript</span></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:2; -o-tab-size:2; -webkit-tab-size:2; tab-size:2; font-size: 12px !important; line-height: 15px !important;">
    var data = [{
        "parentObjectId": "机柜对象的id",
        "id": "twaver.idc.equipment6",
        "objectId": "D56669CE73E346CD96D85A4DB878EDBC",
        "client": {"loc": 17, "panel": "twaver.idc.equipment.newPanel"}
    }, {
        "parentObjectId": "机柜对象的id",
        "id": "twaver.idc.equipment4",
        "objectId": "DFAFB9619BA1439B8ACEB291563E74FB",
        "client": {"loc": 28, "panel": "twaver.idc.equipment.newPanel"}
    }]
    rackEditor.setData(data);</textarea></div>
			<div class="crayon-main" style=" max-width: 1000px;">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-57285c9372f13824403484-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-57285c9372f13824403484-2">2</div><div class="crayon-num" data-line="crayon-57285c9372f13824403484-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-57285c9372f13824403484-4">4</div><div class="crayon-num" data-line="crayon-57285c9372f13824403484-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-57285c9372f13824403484-6">6</div><div class="crayon-num" data-line="crayon-57285c9372f13824403484-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-57285c9372f13824403484-8">8</div><div class="crayon-num" data-line="crayon-57285c9372f13824403484-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-57285c9372f13824403484-10">10</div><div class="crayon-num" data-line="crayon-57285c9372f13824403484-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-57285c9372f13824403484-12">12</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:2; -o-tab-size:2; -webkit-tab-size:2; tab-size:2;"><div class="crayon-line" id="crayon-57285c9372f13824403484-1"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">data</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-57285c9372f13824403484-2"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"parentObjectId"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"机柜对象的id"</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-57285c9372f13824403484-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"id"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"twaver.idc.equipment6"</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-57285c9372f13824403484-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"objectId"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"D56669CE73E346CD96D85A4DB878EDBC"</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-57285c9372f13824403484-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"client"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-s">"loc"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-cn">17</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">"panel"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"twaver.idc.equipment.newPanel"</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-57285c9372f13824403484-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-57285c9372f13824403484-7"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"parentObjectId"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"机柜对象的id"</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-57285c9372f13824403484-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"id"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"twaver.idc.equipment4"</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-57285c9372f13824403484-9"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"objectId"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"DFAFB9619BA1439B8ACEB291563E74FB"</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-57285c9372f13824403484-10"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"client"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-s">"loc"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-cn">28</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">"panel"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"twaver.idc.equipment.newPanel"</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-57285c9372f13824403484-11"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">]</span></div><div class="crayon-line crayon-striped-line" id="crayon-57285c9372f13824403484-12"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">rackEditor</span><span class="crayon-sy">.</span><span class="crayon-e">setData</span><span class="crayon-sy">(</span><span class="crayon-v">data</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0295 seconds] -->

    </li>
</ol>
<!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-57285c9372f1a454893063" class="crayon-syntax crayon-theme-eclipse crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" max-width: 1000px; margin-top: 12px; margin-bottom: 12px; margin-left: 20px; margin-right: 35px; clear: none; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">JavaScript</span></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:2; -o-tab-size:2; -webkit-tab-size:2; tab-size:2; font-size: 12px !important; line-height: 15px !important;">
    //指定make路径
    make.Default.path = 'make/';

    //取得机柜类型
    var modelClass = doodle.Utils.getUrlParam('modelClass');

    //取得显示编辑器的容器jquery对象
    var parentView = $('.main');

    //实例化doodle.RackEditor对象,modelClass如果为空,在设备栏会显示所有机柜.
    var rackEditor = window.rackEditor = new doodle.RackEditor(parentView, modelClass);

    //全局视图
    $("#overview").click(function () {
        rackEditor.zoomOverview();
    });

    //调用getData取得编辑结果.
    $("#save").click(function () {
        var data = rackEditor.getData();
        console.log(data);
        data = JSON.stringify(data);
        var parent = rackEditor.parentNode.getId();
        localStorage.setItem(parent + '_children', data);
        alert('save success');
    });

    //export json
    $('#export').click(function () {
        var text = rackEditor.getData();
        if (!text) {
            alert("没有数据");
            return;
        }
        text = JSON.stringify(text);
        var content = "&lt;div&gt;导出数据：&lt;br&gt;&lt;textarea&gt;" + text + "&lt;/textarea&gt;&lt;/div&gt;";
        $(content).dialog({
            "title": "导出json",
            "width": 400,
            "height": 500
        });

    });

    //从localStoage中加载数据
    setTimeout(function () {

        if (modelClass) {
            var objectId = doodle.Utils.getUrlParam('objectId');
            rackEditor.loadParent(modelClass, {objectId: objectId});
            var data = localStorage.getItem(objectId + '_children');
            if (data) {
                data = JSON.parse(data);
                rackEditor.loadChildren(data);
            }
            setTimeout(function () {
                rackEditor.zoomOverview();
            }, 800);
        }
    }, 800);</textarea></div>
			<div class="crayon-main" style=" max-width: 1000px;">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-57285c9372f1a454893063-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-57285c9372f1a454893063-2">2</div><div class="crayon-num" data-line="crayon-57285c9372f1a454893063-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-57285c9372f1a454893063-4">4</div><div class="crayon-num" data-line="crayon-57285c9372f1a454893063-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-57285c9372f1a454893063-6">6</div><div class="crayon-num" data-line="crayon-57285c9372f1a454893063-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-57285c9372f1a454893063-8">8</div><div class="crayon-num" data-line="crayon-57285c9372f1a454893063-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-57285c9372f1a454893063-10">10</div><div class="crayon-num" data-line="crayon-57285c9372f1a454893063-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-57285c9372f1a454893063-12">12</div><div class="crayon-num" data-line="crayon-57285c9372f1a454893063-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-57285c9372f1a454893063-14">14</div><div class="crayon-num" data-line="crayon-57285c9372f1a454893063-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-57285c9372f1a454893063-16">16</div><div class="crayon-num" data-line="crayon-57285c9372f1a454893063-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-57285c9372f1a454893063-18">18</div><div class="crayon-num" data-line="crayon-57285c9372f1a454893063-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-57285c9372f1a454893063-20">20</div><div class="crayon-num" data-line="crayon-57285c9372f1a454893063-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-57285c9372f1a454893063-22">22</div><div class="crayon-num" data-line="crayon-57285c9372f1a454893063-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-57285c9372f1a454893063-24">24</div><div class="crayon-num" data-line="crayon-57285c9372f1a454893063-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-57285c9372f1a454893063-26">26</div><div class="crayon-num" data-line="crayon-57285c9372f1a454893063-27">27</div><div class="crayon-num crayon-striped-num" data-line="crayon-57285c9372f1a454893063-28">28</div><div class="crayon-num" data-line="crayon-57285c9372f1a454893063-29">29</div><div class="crayon-num crayon-striped-num" data-line="crayon-57285c9372f1a454893063-30">30</div><div class="crayon-num" data-line="crayon-57285c9372f1a454893063-31">31</div><div class="crayon-num crayon-striped-num" data-line="crayon-57285c9372f1a454893063-32">32</div><div class="crayon-num" data-line="crayon-57285c9372f1a454893063-33">33</div><div class="crayon-num crayon-striped-num" data-line="crayon-57285c9372f1a454893063-34">34</div><div class="crayon-num" data-line="crayon-57285c9372f1a454893063-35">35</div><div class="crayon-num crayon-striped-num" data-line="crayon-57285c9372f1a454893063-36">36</div><div class="crayon-num" data-line="crayon-57285c9372f1a454893063-37">37</div><div class="crayon-num crayon-striped-num" data-line="crayon-57285c9372f1a454893063-38">38</div><div class="crayon-num" data-line="crayon-57285c9372f1a454893063-39">39</div><div class="crayon-num crayon-striped-num" data-line="crayon-57285c9372f1a454893063-40">40</div><div class="crayon-num" data-line="crayon-57285c9372f1a454893063-41">41</div><div class="crayon-num crayon-striped-num" data-line="crayon-57285c9372f1a454893063-42">42</div><div class="crayon-num" data-line="crayon-57285c9372f1a454893063-43">43</div><div class="crayon-num crayon-striped-num" data-line="crayon-57285c9372f1a454893063-44">44</div><div class="crayon-num" data-line="crayon-57285c9372f1a454893063-45">45</div><div class="crayon-num crayon-striped-num" data-line="crayon-57285c9372f1a454893063-46">46</div><div class="crayon-num" data-line="crayon-57285c9372f1a454893063-47">47</div><div class="crayon-num crayon-striped-num" data-line="crayon-57285c9372f1a454893063-48">48</div><div class="crayon-num" data-line="crayon-57285c9372f1a454893063-49">49</div><div class="crayon-num crayon-striped-num" data-line="crayon-57285c9372f1a454893063-50">50</div><div class="crayon-num" data-line="crayon-57285c9372f1a454893063-51">51</div><div class="crayon-num crayon-striped-num" data-line="crayon-57285c9372f1a454893063-52">52</div><div class="crayon-num" data-line="crayon-57285c9372f1a454893063-53">53</div><div class="crayon-num crayon-striped-num" data-line="crayon-57285c9372f1a454893063-54">54</div><div class="crayon-num" data-line="crayon-57285c9372f1a454893063-55">55</div><div class="crayon-num crayon-striped-num" data-line="crayon-57285c9372f1a454893063-56">56</div><div class="crayon-num" data-line="crayon-57285c9372f1a454893063-57">57</div><div class="crayon-num crayon-striped-num" data-line="crayon-57285c9372f1a454893063-58">58</div><div class="crayon-num" data-line="crayon-57285c9372f1a454893063-59">59</div><div class="crayon-num crayon-striped-num" data-line="crayon-57285c9372f1a454893063-60">60</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:2; -o-tab-size:2; -webkit-tab-size:2; tab-size:2;"><div class="crayon-line" id="crayon-57285c9372f1a454893063-1"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//指定make路径</span></div><div class="crayon-line crayon-striped-line" id="crayon-57285c9372f1a454893063-2"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">make</span><span class="crayon-sy">.</span><span class="crayon-st">Default</span><span class="crayon-sy">.</span><span class="crayon-e ">path</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'make/'</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-57285c9372f1a454893063-3">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-57285c9372f1a454893063-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//取得机柜类型</span></div><div class="crayon-line" id="crayon-57285c9372f1a454893063-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">modelClass</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">doodle</span><span class="crayon-sy">.</span><span class="crayon-v">Utils</span><span class="crayon-sy">.</span><span class="crayon-e">getUrlParam</span><span class="crayon-sy">(</span><span class="crayon-s">'modelClass'</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-57285c9372f1a454893063-6">&nbsp;</div><div class="crayon-line" id="crayon-57285c9372f1a454893063-7"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//取得显示编辑器的容器jquery对象</span></div><div class="crayon-line crayon-striped-line" id="crayon-57285c9372f1a454893063-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">parentView</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-sy">(</span><span class="crayon-s">'.main'</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-57285c9372f1a454893063-9">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-57285c9372f1a454893063-10"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//实例化doodle.RackEditor对象,modelClass如果为空,在设备栏会显示所有机柜.</span></div><div class="crayon-line" id="crayon-57285c9372f1a454893063-11"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">rackEditor</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">window</span><span class="crayon-sy">.</span><span class="crayon-v">rackEditor</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-v">doodle</span><span class="crayon-sy">.</span><span class="crayon-e">RackEditor</span><span class="crayon-sy">(</span><span class="crayon-v">parentView</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">modelClass</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-57285c9372f1a454893063-12">&nbsp;</div><div class="crayon-line" id="crayon-57285c9372f1a454893063-13"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//全局视图</span></div><div class="crayon-line crayon-striped-line" id="crayon-57285c9372f1a454893063-14"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">$</span><span class="crayon-sy">(</span><span class="crayon-s">"#overview"</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">click</span><span class="crayon-sy">(</span><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-57285c9372f1a454893063-15"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">rackEditor</span><span class="crayon-sy">.</span><span class="crayon-e">zoomOverview</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-57285c9372f1a454893063-16"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-57285c9372f1a454893063-17">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-57285c9372f1a454893063-18"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//调用getData取得编辑结果.</span></div><div class="crayon-line" id="crayon-57285c9372f1a454893063-19"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">$</span><span class="crayon-sy">(</span><span class="crayon-s">"#save"</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">click</span><span class="crayon-sy">(</span><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-57285c9372f1a454893063-20"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">data</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">rackEditor</span><span class="crayon-sy">.</span><span class="crayon-e">getData</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-57285c9372f1a454893063-21"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">console</span><span class="crayon-sy">.</span><span class="crayon-e">log</span><span class="crayon-sy">(</span><span class="crayon-v">data</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-57285c9372f1a454893063-22"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">data</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">JSON</span><span class="crayon-sy">.</span><span class="crayon-e">stringify</span><span class="crayon-sy">(</span><span class="crayon-v">data</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-57285c9372f1a454893063-23"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-r">parent</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">rackEditor</span><span class="crayon-sy">.</span><span class="crayon-v">parentNode</span><span class="crayon-sy">.</span><span class="crayon-e">getId</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-57285c9372f1a454893063-24"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">localStorage</span><span class="crayon-sy">.</span><span class="crayon-e">setItem</span><span class="crayon-sy">(</span><span class="crayon-r">parent</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-s">'_children'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">data</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-57285c9372f1a454893063-25"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">alert</span><span class="crayon-sy">(</span><span class="crayon-s">'save success'</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-57285c9372f1a454893063-26"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-57285c9372f1a454893063-27">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-57285c9372f1a454893063-28"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//export json</span></div><div class="crayon-line" id="crayon-57285c9372f1a454893063-29"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">$</span><span class="crayon-sy">(</span><span class="crayon-s">'#export'</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">click</span><span class="crayon-sy">(</span><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-57285c9372f1a454893063-30"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">text</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">rackEditor</span><span class="crayon-sy">.</span><span class="crayon-e">getData</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-57285c9372f1a454893063-31"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-o">!</span><span class="crayon-v">text</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-57285c9372f1a454893063-32"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">alert</span><span class="crayon-sy">(</span><span class="crayon-s">"没有数据"</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-57285c9372f1a454893063-33"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-57285c9372f1a454893063-34"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-57285c9372f1a454893063-35"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">text</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">JSON</span><span class="crayon-sy">.</span><span class="crayon-e">stringify</span><span class="crayon-sy">(</span><span class="crayon-v">text</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-57285c9372f1a454893063-36"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-e ">content</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">"&lt;div&gt;导出数据：&lt;br&gt;&lt;textarea&gt;"</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-v">text</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-s">"&lt;/textarea&gt;&lt;/div&gt;"</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-57285c9372f1a454893063-37"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">$</span><span class="crayon-sy">(</span><span class="crayon-v">content</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">dialog</span><span class="crayon-sy">(</span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-57285c9372f1a454893063-38"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"title"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"导出json"</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-57285c9372f1a454893063-39"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"width"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-cn">400</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-57285c9372f1a454893063-40"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"height"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-cn">500</span></div><div class="crayon-line" id="crayon-57285c9372f1a454893063-41"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-57285c9372f1a454893063-42">&nbsp;</div><div class="crayon-line" id="crayon-57285c9372f1a454893063-43"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-57285c9372f1a454893063-44">&nbsp;</div><div class="crayon-line" id="crayon-57285c9372f1a454893063-45"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//从localStoage中加载数据</span></div><div class="crayon-line crayon-striped-line" id="crayon-57285c9372f1a454893063-46"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">setTimeout</span><span class="crayon-sy">(</span><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-57285c9372f1a454893063-47">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-57285c9372f1a454893063-48"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">modelClass</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-57285c9372f1a454893063-49"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">objectId</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">doodle</span><span class="crayon-sy">.</span><span class="crayon-v">Utils</span><span class="crayon-sy">.</span><span class="crayon-e">getUrlParam</span><span class="crayon-sy">(</span><span class="crayon-s">'objectId'</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-57285c9372f1a454893063-50"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">rackEditor</span><span class="crayon-sy">.</span><span class="crayon-e">loadParent</span><span class="crayon-sy">(</span><span class="crayon-v">modelClass</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-v">objectId</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">objectId</span><span class="crayon-sy">}</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-57285c9372f1a454893063-51"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">data</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">localStorage</span><span class="crayon-sy">.</span><span class="crayon-e">getItem</span><span class="crayon-sy">(</span><span class="crayon-v">objectId</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-s">'_children'</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-57285c9372f1a454893063-52"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">data</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-57285c9372f1a454893063-53"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">data</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">JSON</span><span class="crayon-sy">.</span><span class="crayon-e">parse</span><span class="crayon-sy">(</span><span class="crayon-v">data</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-57285c9372f1a454893063-54"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">rackEditor</span><span class="crayon-sy">.</span><span class="crayon-e">loadChildren</span><span class="crayon-sy">(</span><span class="crayon-v">data</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-57285c9372f1a454893063-55"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-57285c9372f1a454893063-56"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">setTimeout</span><span class="crayon-sy">(</span><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-57285c9372f1a454893063-57"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">rackEditor</span><span class="crayon-sy">.</span><span class="crayon-e">zoomOverview</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-57285c9372f1a454893063-58"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">800</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-57285c9372f1a454893063-59"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-57285c9372f1a454893063-60"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">800</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.1012 seconds] -->

详细可以参考RackEditor.js</p>
					<div id="views_footer" class="update_info">137 views. Last update: March 22, 2016</div>
				</div>
				<div style="padding-left:10px; padding-top:10px;float:right;">
					<a href="index.html" onclick="printFriendly(); return false;">
					<img id="print_button_footer" style="border:none;-webkit-box-shadow:none; box-shadow:none;" src="../../../wp-content/themes/mono/images/button-print-gry20.png" alt="Print" />
					</a>
				</div>
				<div id="comments"></div>
            </div>
        	
        </div>

        <div class="clear"></div>

	
<script type='text/javascript'>
/* <![CDATA[ */
var tocplus = {"visibility_show":"show","visibility_hide":"hide","width":"Auto"};
/* ]]> */
</script>
<script type='text/javascript' src='../../../wp-content/plugins/table-of-contents-plus/front.min-ver=1509.js'></script>
<script type='text/javascript' src='../../../wp-includes/js/wp-embed.min-ver=4.4.2.js'></script>

        <div class="footer" id="footer">
                <p class="foot_t">
                <script type="text/javascript">
                                        copyright=new Date();
                                        update=copyright.getFullYear();
                                        document.write("版权所有 &copy; 2004-"+ update + "  赛瓦软件 Serva Software | 沪ICP备10200962号");
                                </script>
            </p>

        </div>

    </div>

<div style="display:none"><script src="http://s14.cnzz.com/stat.php?id=5023414&web_id=5023414" language="JavaScript"></script></div>
</body>
</html>

